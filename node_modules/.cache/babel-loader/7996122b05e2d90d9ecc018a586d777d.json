{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/Course/WorldPenguins/src/components/addViewPenguin.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport '../styles/addViewPenguin.css';\nexport default class addViewPenguin extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: '',\n      description: '',\n      file: '',\n      img: '',\n      imagePreviewUrl: false\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      console.log('handle uploading-', this.state.file);\n    };\n\n    this.handleImageChange = e => {\n      e.preventDefault();\n      let reader = new FileReader();\n      const file = e.target.files[0];\n\n      reader.onloadend = () => {\n        this.setState({\n          file: file,\n          imagePreviewUrl: reader.result\n        });\n      };\n\n      reader.readAsDataURL(file);\n    };\n\n    this.onChange = ({\n      target\n    }) => {\n      this.setState({\n        [target.name]: target.value\n      });\n    };\n\n    this.addViewPenguin = async user => {\n      try {\n        const formData = new FormData();\n        formData.append('image', this.state.file, this.state.file.name);\n\n        const _ref = await axios.post('http://localhost:5000/kinds/image-upload', formData),\n              data = _ref.data;\n\n        user.img = data;\n        console.log(data);\n      } catch (err) {\n        console.log(\"Ошибка:\" + err);\n      }\n\n      try {\n        console.log(user);\n        await axios.post('http://localhost:5000/kinds/add', user);\n      } catch (err) {\n        console.log(\"Ошибка:\" + err);\n      }\n    };\n\n    this.onSubmit = e => {\n      e.preventDefault();\n      const user = {\n        title: this.state.title,\n        description: this.state.description,\n        img: ''\n      };\n      this.addViewPenguin(user);\n      this.setState({\n        title: '',\n        description: '',\n        file: '',\n        imagePreviewUrl: ''\n      });\n    };\n  }\n\n  render() {\n    let imagePreviewUrl = this.state.imagePreviewUrl;\n    let $imagePreview = null;\n\n    if (imagePreviewUrl) {\n      $imagePreview = React.createElement(\"img\", {\n        src: imagePreviewUrl,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      });\n    } else {\n      $imagePreview = React.createElement(\"div\", {\n        className: \"previewText\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Please select an Image for Preview\");\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row z-depth-4 WindowCont\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      className: \"center titleAdd\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Add view penguin\"), React.createElement(\"div\", {\n      className: \"col s5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"center z-depth-5 ImgUpload imgPreview\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, $imagePreview), React.createElement(\"div\", {\n      className: \"previewComponent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"file-field input-field\",\n      onSubmit: e => this.handleSubmit(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"btn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"File\"), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: e => this.handleImageChange(e),\n      multiple: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"file-path-wrapper\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      onClick: e => this.handleSubmit(e),\n      className: \"file-path validate\",\n      type: \"text\",\n      placeholder: \"Upload one or more files\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }))))), React.createElement(\"form\", {\n      className: \"col s7\",\n      onSubmit: this.onSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row WindowPole\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"input-field col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      className: \"center EnterTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Title \"), React.createElement(\"input\", {\n      name: \"title\",\n      id: \"title\",\n      type: \"text\",\n      className: \"col 10\",\n      required: true,\n      value: this.state.title,\n      onChange: this.onChange,\n      placeholder: \"Enter view title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col s12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"h6\", {\n      className: \"center EnterTitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Description \"), React.createElement(\"textarea\", {\n      name: \"description\",\n      id: \"description\",\n      required: true,\n      className: \"Descript\",\n      value: this.state.description,\n      onChange: this.onChange,\n      placeholder: \"Enter view descriptions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row WindowPole\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col s12 center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Add\",\n      className: \"btn waves-effect waves-light\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    })))))));\n  }\n\n}","map":{"version":3,"sources":["/home/user/Desktop/Course/WorldPenguins/src/components/addViewPenguin.js"],"names":["React","Component","axios","addViewPenguin","state","title","description","file","img","imagePreviewUrl","handleSubmit","e","preventDefault","console","log","handleImageChange","reader","FileReader","target","files","onloadend","setState","result","readAsDataURL","onChange","name","value","user","formData","FormData","append","post","data","err","onSubmit","render","$imagePreview"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport '../styles/addViewPenguin.css';\r\n\r\n\r\nexport default class addViewPenguin extends Component {\r\n  state = {\r\n    title: '',\r\n    description: '',\r\n    file: '',\r\n    img: '',\r\n    imagePreviewUrl: false\r\n  };\r\n\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    console.log('handle uploading-', this.state.file);\r\n  }\r\n\r\n \r\n  handleImageChange = (e) => {\r\n    e.preventDefault();\r\n\r\n    let reader = new FileReader();\r\n    const file = e.target.files[0];\r\n\r\n    reader.onloadend = () => {\r\n      this.setState({\r\n        file: file,\r\n        imagePreviewUrl: reader.result\r\n      });\r\n    }\r\n\r\n    reader.readAsDataURL(file);\r\n  }  \r\n \r\n\r\n\r\n  onChange = ({ target }) => {\r\n    this.setState({\r\n      [target.name]: target.value\r\n    });\r\n  };\r\n  \r\n  addViewPenguin = async user => {\r\n    try{\r\n      \r\n      const formData = new FormData();\r\n      formData.append(\r\n        'image',\r\n        this.state.file,\r\n        this.state.file.name\r\n      );\r\n      \r\n      const {data} = await axios.post('http://localhost:5000/kinds/image-upload', formData);\r\n      \r\n      user.img = data; \r\n      console.log(data);\r\n\r\n    } catch(err){\r\n      console.log(\"Ошибка:\" + err);\r\n    }\r\n\r\n    try {\r\n      console.log(user);\r\n      await axios.post('http://localhost:5000/kinds/add', user);\r\n    } catch (err) {\r\n      console.log(\"Ошибка:\" + err);\r\n    }\r\n  };\r\n\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n       \r\n    const user = {\r\n      title: this.state.title,\r\n      description: this.state.description,\r\n      img: ''\r\n    }\r\n    this.addViewPenguin(user);\r\n    \r\n    this.setState({\r\n        title: '',\r\n        description: '',\r\n        file: '',\r\n        imagePreviewUrl: ''\r\n    });\r\n  };\r\n\r\n  render() {\r\n    \r\n    let {imagePreviewUrl} = this.state;\r\n    let $imagePreview = null;\r\n    if (imagePreviewUrl) {\r\n      $imagePreview = (<img src={imagePreviewUrl} />);\r\n    } else {\r\n      $imagePreview = (<div className=\"previewText\">Please select an Image for Preview</div>);\r\n    }\r\n\r\n    return (\r\n      <div className='container'>\r\n        <div className='row z-depth-4 WindowCont'>\r\n          <div className='col s12'>\r\n            <h4 className='center titleAdd'>Add view penguin</h4>\r\n            \r\n            \r\n            <div className='col s5'>\r\n                      \r\n              <div className=\"center z-depth-5 ImgUpload imgPreview\">\r\n                  {$imagePreview}\r\n              </div>\r\n              \r\n              <div className=\"previewComponent\">\r\n                <form className=\"file-field input-field\" onSubmit={(e)=>this.handleSubmit(e)}>\r\n                  <div className=\"btn\">\r\n                    <span>File</span>\r\n                    <input type=\"file\" onChange={(e)=>this.handleImageChange(e)} multiple />\r\n                  </div>\r\n                  <div className=\"file-path-wrapper\">\r\n                    <input onClick={(e)=>this.handleSubmit(e)} className=\"file-path validate\" type=\"text\" placeholder=\"Upload one or more files\"/>\r\n                  </div>\r\n                </form>\r\n              </div>\r\n            </div>\r\n            \r\n  \r\n            <form className='col s7' onSubmit={this.onSubmit}>\r\n            <div className=\"row WindowPole\"> \r\n              <div className=\"input-field col s12\">\r\n                <h6 className=\"center EnterTitle\">Title </h6>\r\n                <input\r\n                    name='title'\r\n                    id='title'\r\n                    type='text'\r\n                    className='col 10'\r\n                    required\r\n                    value={this.state.title}\r\n                    onChange={this.onChange}\r\n                    placeholder=\"Enter view title\"\r\n                  />\r\n              </div>\r\n              <div className=\"col s12\">\r\n                <h6 className=\"center EnterTitle\">Description </h6>\r\n                <textarea \r\n                name='description'\r\n                id='description'\r\n                required\r\n                className='Descript'\r\n                value={this.state.description}\r\n                onChange={this.onChange}\r\n                placeholder=\"Enter view descriptions\">\r\n                </textarea>\r\n              </div>\r\n            </div>\r\n            <div className='row WindowPole'>\r\n                <div className='col s12 center'>\r\n                  <input\r\n                    type='submit'\r\n                    value='Add'\r\n                    className='btn waves-effect waves-light'\r\n                  />\r\n                </div>\r\n              </div>\r\n            </form>\r\n            \r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}